{"version":3,"sources":["ng-city-select.min.js"],"names":["ng","undefined","module","angular","run","$templateCache","put","directive","restrict","replace","scope","cityList","multiSelectMode","placeHolder","selected","templateUrl","link","defaultPlaceHolder","isInSelecMode","selectAllFlag","Array","isArray","toggleSelect","addToSelected","city","index","indexOf","splice","push","isCitySelected","selectAllCities","$event","stopPropagation","forEach","item","concat","cities","confirmSelection","$watch"],"mappings":"CAAA,SAAWA,EAAIC,GACX,YAEJD,GAAGE,OAAO,qBACVC,QAAQD,OAAO,kBAAkBE,KAAK,iBAAkB,SAASC,GAAiBA,EAAeC,IAAI,+BAA+B,0rCAQpIN,EAAGE,OAAO,kBAAkBK,UACxB,eAAgB,WACZ,OACIC,SAAU,IACVC,SAAS,EACTC,OACIC,SAAU,IACVC,gBAAiB,KACjBC,YAAa,KACbC,SAAU,KAEdC,YAAa,+BACbC,KAAM,SAAUN,GACZA,EAAMO,mBAAqB,QAC3BP,EAAMQ,eAAgB,EACtBR,EAAMS,eAAgB,EAEjBT,EAAMI,UAAaM,MAAMC,QAAQX,EAAMI,YACxCJ,EAAMI,aAGVJ,EAAMY,aAAe,WACjBZ,EAAMQ,eAAiBR,EAAMQ,eAGjCR,EAAMa,cAAgB,SAAUC,GAC5B,GAAId,EAAME,gBAKN,CACA,GAAIa,GAAQf,EAAMI,SAASY,QAAQF,EAC/BC,GAAQ,GACRf,EAAMI,SAASa,OAAOF,EAAO,GAG7Bf,EAAMI,SAASc,KAAKJ,OAVxBd,GAAMI,YACNJ,EAAMI,SAASc,KAAKJ,GACpBd,EAAMQ,eAAgB,GAa9BR,EAAMmB,eAAiB,SAASL,GAC5B,MAAGd,GAAMI,SAASY,QAAQF,GAAQ,IACvB,GAEJ,GAGXd,EAAMoB,gBAAkB,SAASC,GAC7BA,EAAOC,kBACPtB,EAAMI,YAEHJ,EAAMS,cACLT,EAAMS,eAAgB,GAGtBhB,QAAQ8B,QAAQvB,EAAMC,SAAU,SAASuB,GACrCxB,EAAMI,SAAYJ,EAAMI,SAASqB,OAAOD,EAAKE,UAEjD1B,EAAMS,eAAgB,IAI9BT,EAAM2B,iBAAmB,WACrB3B,EAAMQ,eAAgB,GAG1BR,EAAM4B,OAAO,kBAAmB,mBAO7CnC","file":"ng-city-select.min.js","sourcesContent":["(function (ng, undefined){\n    'use strict';\n\nng.module('ng-city-select', []);\nangular.module(\"ng-city-select\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"ng-city-select-template.html\",\"<div class=\\\"ng-city-select-container\\\">\\n    <a href=\\\"\\\" class=\\\"select-box\\\" ng-class=\\\"{\\'in-select-mode\\':isInSelecMode}\\\" ng-click=\\\"toggleSelect()\\\">\\n        <span ng-show=\\\"selected.length === 0\\\" ng-bind=\\\"placeHolder || defaultPlaceHolder\\\"></span>\\n        <span ng-show=\\\"selected.length !== 0&&!multiSelectMode\\\" ng-bind=\\\"selected[0].name\\\"></span>\\n        <i class=\\\"arrow-icon\\\"></i>\\n    </a>\\n    <ul class=\\\"select-list\\\" ng-show=\\\"isInSelecMode\\\">\\n        <li ng-if=\\\"multiSelectMode\\\" class=\\\"multi-select-operation\\\">\\n            <label for=\\\"all-cities\\\">全选</label>\\n            <input type=\\\"checkbox\\\" id=\\\"all-cities\\\" ng-click=\\\"selectAllCities($event)\\\" ng-model=\\\"selectAllFlag\\\"/>\\n            <button ng-click=\\\"confirmSelection()\\\">确定</button>\\n        </li>\\n        <li ng-repeat=\\\"cateObj in ::cityList track by cateObj.category\\\">\\n           <div ng-bind=\\\"cateObj.category\\\"></div>\\n           <ul class=\\\"city-list\\\">\\n                <li ng-repeat=\\\"city in cateObj.cities track by city.id\\\" ng-class=\\\"{\\'city-selected\\':isCitySelected(city)}\\\">\\n                    <a href=\\\"\\\" ng-bind=\\\"city.name\\\" ng-click=\\\"addToSelected(city)\\\"></a>\\n                </li>\\n           </ul>\\n        </li>\\n    </ul>\\n</div>\");}]);\n/*cityList is an array, and its format is like this:\n [\n {\n category:'category name',\n cities:[{ id:1, name:'' }]\n }\n ]*/\nng.module('ng-city-select').directive(\n    'ngCitySelect', function () {\n        return {\n            restrict: 'E',\n            replace: true,\n            scope: {\n                cityList: '=',\n                multiSelectMode: '=?',\n                placeHolder: '@?',\n                selected: '='\n            },\n            templateUrl: 'ng-city-select-template.html',\n            link: function (scope) {\n                scope.defaultPlaceHolder = '请选择城市';\n                scope.isInSelecMode = false;\n                scope.selectAllFlag = false;\n\n                if (!scope.selected && !Array.isArray(scope.selected)) {\n                    scope.selected = [];\n                }\n\n                scope.toggleSelect = function () {\n                    scope.isInSelecMode = !scope.isInSelecMode;\n                };\n\n                scope.addToSelected = function (city) {\n                    if(!scope.multiSelectMode){\n                        scope.selected = [];\n                        scope.selected.push(city);\n                        scope.isInSelecMode = false;\n                    }\n                    else{\n                        var index = scope.selected.indexOf(city);\n                        if (index > -1) {\n                            scope.selected.splice(index, 1);\n                        }\n                        else {\n                            scope.selected.push(city);\n                        }\n                    }\n                };\n\n                scope.isCitySelected = function(city){\n                    if(scope.selected.indexOf(city) > -1){\n                        return true;\n                    }\n                    return false;\n                };\n\n                scope.selectAllCities = function($event){\n                    $event.stopPropagation();\n                    scope.selected = [];\n\n                    if(scope.selectAllFlag){\n                        scope.selectAllFlag = false;\n                    }\n                    else{\n                        angular.forEach(scope.cityList, function(item){\n                            scope.selected  = scope.selected.concat(item.cities);\n                        });\n                        scope.selectAllFlag = true;\n                    }\n                };\n\n                scope.confirmSelection = function(){\n                    scope.isInSelecMode = false;\n                };\n\n                scope.$watch('selected.length', function(){\n\n                });\n            }\n        };\n    }\n);\n})(angular);"],"sourceRoot":"/source/"}